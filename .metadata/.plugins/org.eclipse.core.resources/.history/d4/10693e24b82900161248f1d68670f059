import java.io.IOException;
import java.util.concurrent.TimeoutException;

import net.rubyeye.xmemcached.MemcachedClient;
import net.rubyeye.xmemcached.XMemcachedClient;
import net.rubyeye.xmemcached.XMemcachedClientBuilder;
import net.rubyeye.xmemcached.exception.MemcachedException;
import net.rubyeye.xmemcached.utils.AddrUtil;

public class TesteMemcached {

	public static void main(String[] args) {

		// Inicializa uma conexao com o Memcached
		XMemcachedClientBuilder builder = new XMemcachedClientBuilder(AddrUtil.getAddresses("localhost:11211"));
		try {
			MemcachedClient client = builder.build();

			String nome = client.get("chaveNome");
			if (nome == null){
				System.out.println("Chave nao encontrada no cache. Adicionando...");
				client.set("chaveNome", 0, "Tales Viegas");
			} else {
				System.out.println("Chave encontrada no cache: " + nome);
				System.out.println("Vou atualizar a chave!");
				client.set("chaveNome", 0, "John Doe");
				
			}
					
		} catch (IOException e) {
			e.printStackTrace();
		} catch (TimeoutException e) {
			e.printStackTrace();
		} catch (InterruptedException e) {
			e.printStackTrace();
		} catch (MemcachedException e) {
			e.printStackTrace();
		}
		
		
		

	}

}
